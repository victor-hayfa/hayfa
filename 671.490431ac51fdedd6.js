"use strict";(self.webpackChunkhayfa=self.webpackChunkhayfa||[]).push([[671],{9671:(K,u,i)=>{i.r(u),i.d(u,{LocalEventsModule:()=>G});var f=i(6895),d=i(1635),c=i(7155),h=i(8739),m=i(6308),p=i(220),t=i(4650),g=i(2687),v=i(5412),C=i(7009),L=i(4868),E=i(6864),_=i(529),x=i(3162),b=i(4859),T=i(4144),Z=i(266);function y(e,a){1&e&&t._UZ(0,"mat-progress-bar",23)}function w(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Nome do Local "),t.qZA())}function A(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function N(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Descri\xe7\xe3o "),t.qZA())}function D(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.description," ")}}function M(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Arquivo "),t.qZA())}function S(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit,s=t.oxw();return t.KtG(s.downloadPDF(l.id))}),t._UZ(1,"i",28),t._uU(2,"\xa0PDF"),t.qZA()}}function U(e,a){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,S,3,0,"button",26),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.file)}}function Y(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Status "),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"span",31),t._uU(1,"Ativo"),t.qZA())}function B(e,a){1&e&&(t.TgZ(0,"span",32),t._uU(1,"Inativo"),t.qZA())}function P(e,a){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,k,2,0,"span",29),t.YNc(2,B,2,0,"span",30),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.status),t.xp6(1),t.Q6J("ngIf",!n.status)}}function O(e,a){1&e&&t._UZ(0,"th",33)}function F(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",25)(1,"div",34)(2,"button",35),t.NdJ("click",function(){const s=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.openLocalEventDialog(s))}),t._UZ(3,"i",36),t.qZA(),t.TgZ(4,"button",37),t.NdJ("click",function(){const s=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.delete(s.id))}),t._UZ(5,"i",38),t.qZA()()()}}function R(e,a){1&e&&t._UZ(0,"tr",39)}function J(e,a){1&e&&t._UZ(0,"tr",40)}const Q=function(){return[25,50,100]},z=[{path:"",component:(()=>{class e{constructor(n,o,l,s,r,$,q){this._liveAnnouncer=n,this.dialog=o,this._snackBar=l,this.router=s,this.dialogService=r,this.localEventResource=$,this.http=q,this.loading=!1,this.localEvents=[],this.displayedColumns=["name","description","file","status","options"],this.dataSource=new c.by}ngOnInit(){this.downloadLocalEvents()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}sortChange(n){this._liveAnnouncer.announce(n.direction?`Sorted ${n.direction}ending`:"Sorting cleared")}openLocalEventDialog(n){this.dialog.open(p.w,{width:"800px",maxHeight:"100vh",panelClass:"dialog",autoFocus:!1,data:{localEvent:n}}).afterClosed().subscribe(l=>{l&&this.downloadLocalEvents()})}downloadLocalEvents(){this.loading=!0,this.localEventResource.list().then(n=>{this.dataSource.data=n,this.localEvents=n,this.localEvents.forEach(o=>{this.filePDF=o.file}),this.status=n.status}).catch(n=>{this.openSnackBar("Erro ao listar","Fechar","danger"),console.log(n)}).finally(()=>{this.loading=!1})}delete(n){this.dialogService.openConfirmDialog("Excluir","Tem certeza que deseja excluir?").afterClosed().subscribe(o=>{o&&(this.loading=!0,this.localEventResource.delete(n).then(()=>{this.downloadLocalEvents(),this.openSnackBar("Exclu\xeddo com sucesso!","Fechar","success")}).catch(l=>{this.openSnackBar("Erro ao excluir","Fechar","danger"),console.log(l)}).finally(()=>{this.loading=!1}))})}downloadPDF(n){this.localEventResource.download(n).then(o=>{this.openSnackBar("Download feito com sucesso!","Fechar","success");const l=new Blob([o],{type:"application/pdf"}),s=window.URL.createObjectURL(l),r=document.createElement("a");r.href=s,r.download="seu_arquivo.pdf",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s)},o=>{this.openSnackBar("Erro ao baixar","Fechar","danger"),console.error(o)})}openSnackBar(n,o,l){this._snackBar.open(n,o,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+l})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.Kd),t.Y36(v.uw),t.Y36(C.ux),t.Y36(d.F0),t.Y36(L.x),t.Y36(E.P),t.Y36(_.eN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-local-events-list"]],viewQuery:function(n,o){if(1&n&&(t.Gf(h.NW,5),t.Gf(m.YE,5)),2&n){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first),t.iGM(l=t.CRH())&&(o.sort=l.first)}},decls:36,vars:6,consts:[["id","main",1,"main"],[1,"pagetitle"],[1,"border-loading"],["style","height: 3px; border-radius: 50px","color","accent","mode","indeterminate",4,"ngIf"],[1,"header-table"],[1,"d-flex","align-items-center","justify-content-between"],[1,"search_input_group","search-table","w-25","mt-4","mb-4"],[1,"mdi","mdi-magnify"],["matInput","","placeholder","Pesquisar",1,"search_input",3,"input"],["input",""],["mat-stroked-button","","type","button",1,"button-add",3,"click"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","file"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",3,"pageSizeOptions"],["color","accent","mode","indeterminate",2,"height","3px","border-radius","50px"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","button-download","mat-stroked-button","","matTooltip","Clique para baixar",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Clique para baixar",1,"button-download",3,"click"],[1,"mdi","mdi-file-pdf-box"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],[1,"mat-icon-no-color"],["matTooltip","Editar",1,"icons-options",3,"click"],[1,"mdi","mdi-square-edit-outline"],["matTooltip","Excluir",1,"icons-options",3,"click"],[1,"mdi","mdi-trash-can-outline"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"main",0)(1,"div",1)(2,"h1"),t._uU(3,"Locais de Evento"),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,y,1,0,"mat-progress-bar",3),t.qZA(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"i",7),t._uU(10,"\xa0 "),t.TgZ(11,"input",8,9),t.NdJ("input",function(s){return o.applyFilter(s)}),t.qZA()(),t.TgZ(13,"div")(14,"button",10),t.NdJ("click",function(){return o.openLocalEventDialog()}),t._uU(15,"Adicionar"),t.qZA()()(),t.TgZ(16,"div")(17,"table",11),t.NdJ("matSortChange",function(s){return o.sortChange(s)}),t.ynx(18,12),t.YNc(19,w,2,0,"th",13),t.YNc(20,A,2,1,"td",14),t.BQk(),t.ynx(21,15),t.YNc(22,N,2,0,"th",13),t.YNc(23,D,2,1,"td",14),t.BQk(),t.ynx(24,16),t.YNc(25,M,2,0,"th",13),t.YNc(26,U,2,1,"td",14),t.BQk(),t.ynx(27,17),t.YNc(28,Y,2,0,"th",13),t.YNc(29,P,3,2,"td",14),t.BQk(),t.ynx(30,18),t.YNc(31,O,1,0,"th",19),t.YNc(32,F,6,0,"td",14),t.BQk(),t.YNc(33,R,1,0,"tr",20),t.YNc(34,J,1,0,"tr",21),t.qZA(),t._UZ(35,"mat-paginator",22),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngIf",o.loading),t.xp6(12),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,Q)))},dependencies:[f.O5,h.NW,x.pW,m.YE,m.nU,b.lW,T.Nt,Z.gM,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk],styles:['table[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{margin-top:20px}.button-add[_ngcontent-%COMP%]{border-radius:10px;margin-right:20px;font-size:16px;background-color:#7048ef;color:#fff;display:flex;align-items:center}.mat-header-cell[_ngcontent-%COMP%]{color:#484848;background-color:#f8f7f7;font-size:15px;font-family:TT Commons DemiBold,sans-serif}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0!important}.mdi-magnify[_ngcontent-%COMP%]:before{content:"\\f0349";font-size:smaller}.mdi-download[_ngcontent-%COMP%]:before{content:"\\f01da";color:#7048ef;font-size:17px}.mdi-file-pdf-box[_ngcontent-%COMP%]:before{content:"\\f0226";color:#d00e0ede}.button-download[_ngcontent-%COMP%]{height:25px;width:25px;display:inline-flex;align-items:center;justify-content:center;font-weight:600}.mat-paginator[_ngcontent-%COMP%]{background-color:#f8f7f7;border-radius:10px}']}),e})()},{path:"new",component:p.w},{path:":id/edit",component:p.w}];let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(z),d.Bz]}),e})();var j=i(1108),H=i(1206);let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,I,j.m,H._t]}),e})()}}]);