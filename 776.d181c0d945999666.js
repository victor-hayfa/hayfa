"use strict";(self.webpackChunkhayfa=self.webpackChunkhayfa||[]).push([[776],{7776:(j,v,i)=>{i.r(v),i.d(v,{UserLevelModule:()=>q});var m=i(6895),p=i(1635),r=i(7155),C=i(8739),g=i(6308),c=i(4006),u=i(5412),e=i(4650),L=i(7009),U=i(5687),_=i(3162),x=i(4859),Z=i(455),h=i(1206);function b(t,s){1&t&&e._UZ(0,"mat-progress-bar",13)}let f=(()=>{class t{constructor(o,n,a,l,d){this.formBuilder=o,this._snackBar=n,this.userLevelResource=a,this.dialog=l,this.data=d,this.loading=!1,this.savedChange=!1,this.userLevel=this.data.userLevel}ngOnInit(){this.initForm(),this.populateForm(this.userLevel)}initForm(){this.form=this.formBuilder.group({name:[null,c.kI.required],status:[!0]})}save(o){if(this.form.valid){this.loading=!0;let n=this.form.value;this.userLevel?this.userLevelResource.update(this.userLevel.id,n).then(a=>{this.userLevel=a,this.savedChange=!0,this.openSnackBar("Salvo com sucesso!","Fechar","success"),o&&this.closeDialog()}).catch(a=>{this.openSnackBar(422==a.status?"Erro: J\xe1 existe um n\xedvel de usu\xe1rio com esse c\xf3digo.":"Erro ao salvar","Fechar","danger")}).finally(()=>{this.loading=!1}):this.userLevelResource.create(n).then(a=>{this.userLevel=a,this.savedChange=!0,this.openSnackBar("Salvo com sucesso!","Fechar","success"),o&&this.closeDialog()}).catch(a=>{this.openSnackBar(422==a.status?"Erro: J\xe1 existe um n\xedvel de usu\xe1rio com esse c\xf3digo.":"Erro ao salvar","Fechar","danger")}).finally(()=>{this.loading=!1})}}populateForm(o){this.form.patchValue(o)}openSnackBar(o,n,a){this._snackBar.open(o,n,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+a})}canSave(){return this.form.valid&&!this.loading}closeDialog(){this.savedChange?this.dialog.close(this.userLevel):this.dialog.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.qu),e.Y36(L.ux),e.Y36(U.p),e.Y36(u.so),e.Y36(u.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-level-form"]],decls:18,vars:4,consts:[[3,"formGroup"],[1,"btn-close",3,"click"],["mat-dialog-title","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-header"],["mode","indeterminate",4,"ngIf"],[1,"dialog-body"],[1,"mb-2"],[1,"form-label"],[2,"color","#EC0606DD"],["type","text","formControlName","name",1,"form-control"],[1,"mb-3","mt-4"],["color","primary","formControlName","status"],[1,"dialog-footer"],["mat-button","",1,"btn-save",3,"disabled","click"],["mode","indeterminate"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e.NdJ("click",function(){return n.closeDialog()}),e.qZA(),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.YNc(4,b,1,0,"mat-progress-bar",3),e.TgZ(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"Nome"),e.qZA(),e.TgZ(9,"span",7),e._uU(10," * "),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",9)(13,"mat-slide-toggle",10),e._uU(14,"Status"),e.qZA()()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return n.save(!0)}),e._uU(17,"Salvar e Fechar"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Oqu(n.userLevel?"Editar N\xedvel de Usu\xe1rio":"Novo N\xedvel de Usu\xe1rio"),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(12),e.Q6J("disabled",!n.canSave()))},dependencies:[m.O5,_.pW,x.lW,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.uh,Z.Rr,h.Zt,h.Bh],styles:[".dialog-header[_ngcontent-%COMP%]{font-weight:400;font-size:18px;width:auto;border-bottom:1px solid #d9d9d9;padding:10px 15px;background-color:#f8f7f7;margin-bottom:0;height:50px;cursor:grab}.dialog-body[_ngcontent-%COMP%]{padding:20px;height:150px}.dialog-footer[_ngcontent-%COMP%]{border-top:1px solid #d9d9d9;background-color:#f8f7f7;height:60px}.btn-close[_ngcontent-%COMP%]{float:right;font-size:30px;margin-top:2px}"]}),t})();var T=i(2687),y=i(4868),S=i(4144),k=i(266);function A(t,s){1&t&&e._UZ(0,"mat-progress-bar",22)}function F(t,s){1&t&&(e.TgZ(0,"th",23),e._uU(1," C\xf3digo "),e.qZA())}function N(t,s){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" #",o.id," ")}}function D(t,s){1&t&&(e.TgZ(0,"th",23),e._uU(1," Nome "),e.qZA())}function B(t,s){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.name," ")}}function M(t,s){1&t&&(e.TgZ(0,"th",23),e._uU(1," Status "),e.qZA())}function Y(t,s){1&t&&(e.TgZ(0,"span",27),e._uU(1,"Ativo"),e.qZA())}function J(t,s){1&t&&(e.TgZ(0,"span",28),e._uU(1,"Inativo"),e.qZA())}function O(t,s){if(1&t&&(e.TgZ(0,"td",24),e.YNc(1,Y,2,0,"span",25),e.YNc(2,J,2,0,"span",26),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Q6J("ngIf",o.status),e.xp6(1),e.Q6J("ngIf",!o.status)}}function E(t,s){1&t&&e._UZ(0,"th",29)}function P(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"td",24)(1,"div",30)(2,"button",31),e.NdJ("click",function(){const l=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.openUserLevelDialog(l))}),e._UZ(3,"i",32),e.qZA(),e.TgZ(4,"button",33),e.NdJ("click",function(){const l=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.delete(l.id))}),e._UZ(5,"i",34),e.qZA()()()}}function R(t,s){1&t&&e._UZ(0,"tr",35)}function Q(t,s){1&t&&e._UZ(0,"tr",36)}const w=function(){return[25,50,100]},I=[{path:"",component:(()=>{class t{constructor(o,n,a,l,d,G){this._liveAnnouncer=o,this.dialog=n,this._snackBar=a,this.router=l,this.dialogService=d,this.userLevelResource=G,this.loading=!1,this.userLevel=[],this.status=!1,this.displayedColumns=["code","name","status","options"],this.dataSource=new r.by}ngOnInit(){this.downloadUserLevel()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}sortChange(o){this._liveAnnouncer.announce(o.direction?`Sorted ${o.direction}ending`:"Sorting cleared")}openUserLevelDialog(o){this.dialog.open(f,{width:"500px",maxHeight:"100vh",panelClass:"dialog",autoFocus:!1,data:{userLevel:o}}).afterClosed().subscribe(a=>{a&&this.downloadUserLevel()})}downloadUserLevel(){this.loading=!0,this.userLevelResource.list().then(o=>{this.dataSource.data=o,this.userLevel=o,this.status=o.status}).catch(o=>{this.openSnackBar("Erro ao listar","Fechar","danger"),console.log(o)}).finally(()=>{this.loading=!1})}delete(o){this.dialogService.openConfirmDialog("Excluir","Tem certeza que deseja excluir?").afterClosed().subscribe(n=>{n&&(this.loading=!0,this.userLevelResource.delete(o).then(()=>{this.downloadUserLevel(),this.openSnackBar("Exclu\xeddo com sucesso!","Fechar","success")}).catch(a=>{this.openSnackBar("Erro ao excluir","Fechar","danger"),console.log(a)}).finally(()=>{this.loading=!1}))})}openSnackBar(o,n,a){this._snackBar.open(o,n,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+a})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(T.Kd),e.Y36(u.uw),e.Y36(L.ux),e.Y36(p.F0),e.Y36(y.x),e.Y36(U.p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-level-list"]],viewQuery:function(o,n){if(1&o&&(e.Gf(C.NW,5),e.Gf(g.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.sort=a.first)}},decls:33,vars:6,consts:[["id","main",1,"main"],[1,"pagetitle"],[1,"border-loading"],["style","height: 3px; border-radius: 50px","color","accent","mode","indeterminate",4,"ngIf"],[1,"header-table"],[1,"d-flex","align-items-center","justify-content-between"],[1,"search_input_group","search-table","w-25","mt-4","mb-4"],[1,"mdi","mdi-magnify"],["matInput","","placeholder","Pesquisar",1,"search_input",3,"input"],["input",""],["mat-stroked-button","","type","button",1,"button-add",3,"click"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",3,"pageSizeOptions"],["color","accent","mode","indeterminate",2,"height","3px","border-radius","50px"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],[1,"mat-icon-no-color"],["matTooltip","Editar",1,"icons-options",3,"click"],[1,"mdi","mdi-square-edit-outline"],["matTooltip","Excluir",1,"icons-options",3,"click"],[1,"mdi","mdi-trash-can-outline"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.TgZ(0,"main",0)(1,"div",1)(2,"h1"),e._uU(3,"N\xedveis de Usu\xe1rio"),e.qZA()(),e.TgZ(4,"div",2),e.YNc(5,A,1,0,"mat-progress-bar",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e._UZ(9,"i",7),e._uU(10,"\xa0 "),e.TgZ(11,"input",8,9),e.NdJ("input",function(l){return n.applyFilter(l)}),e.qZA()(),e.TgZ(13,"div")(14,"button",10),e.NdJ("click",function(){return n.openUserLevelDialog()}),e._uU(15,"Adicionar"),e.qZA()()(),e.TgZ(16,"div")(17,"table",11),e.NdJ("matSortChange",function(l){return n.sortChange(l)}),e.ynx(18,12),e.YNc(19,F,2,0,"th",13),e.YNc(20,N,2,1,"td",14),e.BQk(),e.ynx(21,15),e.YNc(22,D,2,0,"th",13),e.YNc(23,B,2,1,"td",14),e.BQk(),e.ynx(24,16),e.YNc(25,M,2,0,"th",13),e.YNc(26,O,3,2,"td",14),e.BQk(),e.ynx(27,17),e.YNc(28,E,1,0,"th",18),e.YNc(29,P,6,0,"td",14),e.BQk(),e.YNc(30,R,1,0,"tr",19),e.YNc(31,Q,1,0,"tr",20),e.qZA(),e._UZ(32,"mat-paginator",21),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("ngIf",n.loading),e.xp6(12),e.Q6J("dataSource",n.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,w)))},dependencies:[m.O5,C.NW,_.pW,g.YE,g.nU,x.lW,S.Nt,k.gM,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],styles:['table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:30%}h1[_ngcontent-%COMP%]{margin-top:20px}.button-add[_ngcontent-%COMP%]{border-radius:10px;margin-right:20px;font-size:16px;background-color:#7048ef;color:#fff;display:flex;align-items:center}.mat-header-cell[_ngcontent-%COMP%]{color:#484848;background-color:#f8f7f7;font-size:15px;font-family:TT Commons DemiBold,sans-serif}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0!important}.mdi-magnify[_ngcontent-%COMP%]:before{content:"\\f0349";font-size:smaller}.mat-paginator[_ngcontent-%COMP%]{background-color:#f8f7f7;border-radius:10px}']}),t})()},{path:"new",component:f},{path:":id/edit",component:f}];let z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(I),p.Bz]}),t})();var H=i(1108);let q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,z,H.m,h._t]}),t})()}}]);