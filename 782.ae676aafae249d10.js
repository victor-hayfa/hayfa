"use strict";(self.webpackChunkhayfa=self.webpackChunkhayfa||[]).push([[782],{5782:(S,f,i)=>{i.r(f),i.d(f,{KanbanModule:()=>P});var d=i(6895),m=i(1635),g=i(1206),c=i(4006),p=i(5412),t=i(4650),b=i(2583),x=i(7009),v=i(3162),C=i(4859);function k(a,s){1&a&&t._UZ(0,"mat-progress-bar",11)}let u=(()=>{class a{constructor(n,e,o,r,l){this.stageKanbanResource=n,this._snackBar=e,this.formBuilder=o,this.dialog=r,this.data=l,this.loading=!1,this.savedChange=!1,this.stageKanban=this.data.stageKanban}ngOnInit(){this.initForm(),this.populateForm(this.stageKanban)}initForm(){this.form=this.formBuilder.group({name:[null,c.kI.required],status:[!0]})}save(n){if(this.form.valid){this.loading=!0;let e=this.form.value;this.stageKanban?this.stageKanbanResource.update(this.stageKanban.id,e).then(o=>{this.stageKanban=o,this.savedChange=!0,this.openSnackBar("Salvo com sucesso!","Fechar","success"),n&&this.closeDialog()}).catch(o=>{this.openSnackBar("Erro ao salvar","Fechar","danger")}).finally(()=>{this.loading=!1}):this.stageKanbanResource.create(e).then(o=>{this.stageKanban=o,this.savedChange=!0,this.openSnackBar("Salvo com sucesso!","Fechar","success"),n&&this.closeDialog()}).catch(o=>{this.openSnackBar("Erro ao salvar","Fechar","danger")}).finally(()=>{this.loading=!1})}}populateForm(n){this.form.patchValue(n)}closeDialog(){this.savedChange?this.dialog.close(this.stageKanban):this.dialog.close()}canSave(){return this.form.valid&&!this.loading}openSnackBar(n,e,o){this._snackBar.open(n,e,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+o})}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(b.C),t.Y36(x.ux),t.Y36(c.qu),t.Y36(p.so),t.Y36(p.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-kanban-form"]],decls:15,vars:4,consts:[["enctype","multipart/form-data",3,"formGroup"],[1,"btn-close",3,"click"],["mat-dialog-title","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-header"],["mode","indeterminate",4,"ngIf"],[1,"dialog-body"],[1,"mb-3","col-md-12"],[1,"form-label"],[2,"color","#EC0606DD"],["type","text","formControlName","name",1,"form-control"],[1,"dialog-footer"],["type","submit","mat-button","",1,"btn-save",3,"disabled","click"],["mode","indeterminate"]],template:function(n,e){1&n&&(t.TgZ(0,"form",0)(1,"div",1),t.NdJ("click",function(){return e.closeDialog()}),t.qZA(),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.YNc(4,k,1,0,"mat-progress-bar",3),t.TgZ(5,"div",4)(6,"div",5)(7,"label",6),t._uU(8,"Nome do Kanban"),t.qZA(),t.TgZ(9,"span",7),t._uU(10," * "),t.qZA(),t._UZ(11,"input",8),t.qZA()(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return e.save(!0)}),t._uU(14,"Adicionar"),t.qZA()()()),2&n&&(t.Q6J("formGroup",e.form),t.xp6(3),t.Oqu(e.stageKanban?"Editar Kanban":"Novo Kanban"),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(9),t.Q6J("disabled",!e.canSave()))},dependencies:[d.O5,v.pW,C.lW,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.uh,g.Zt,g.Bh],styles:[".dialog-header[_ngcontent-%COMP%]{font-weight:400;font-size:18px;width:auto;border-bottom:1px solid #d9d9d9;padding:10px 15px;background-color:#f8f7f7;margin-bottom:0;height:50px;cursor:grab}.dialog-body[_ngcontent-%COMP%]{padding:20px;height:120px}.dialog-footer[_ngcontent-%COMP%]{border-top:1px solid #d9d9d9;background-color:#f8f7f7;height:60px}.btn-close[_ngcontent-%COMP%]{float:right;font-size:30px;margin-top:2px}"]}),a})();var K=i(4409),F=i(3886),Z=i(4868),y=i(4144),_=i(3546);function M(a,s){1&a&&t._UZ(0,"mat-progress-bar",15)}function T(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"div",22)(2,"div",23)(3,"span",24),t._uU(4),t.qZA(),t.TgZ(5,"i",25),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.openNewEventDialog(r))}),t.qZA(),t.TgZ(6,"button",26),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.viewEventsDetails(r.id))}),t._uU(7," Ver mais"),t.qZA()(),t.TgZ(8,"span",27),t._uU(9),t.qZA(),t.TgZ(10,"div",28)(11,"span",29),t._uU(12),t.qZA()(),t.TgZ(13,"div",13),t._UZ(14,"span",30)(15,"span",30)(16,"span",30),t.qZA(),t.TgZ(17,"div",31)(18,"div",32),t._uU(19),t.qZA()()()()}if(2&a){const n=s.$implicit,e=t.oxw(2);t.xp6(4),t.Oqu(n.name),t.xp6(5),t.hij("Local do Evento: ",n.local.name,""),t.xp6(3),t.AsE(" ",e.formatDate(n.date_event)," ",e.formatHour(n.hour_event)," "),t.xp6(6),t.Udp("width",n.percentage>0?n.percentage:100,"%"),t.Q6J("ngClass",n.percentage>0?"progress-bar":"not-progress-bar"),t.xp6(1),t.hij(" ",n.percentage>0?n.percentage+"%":"0%"," ")}}function O(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"mat-card",16)(1,"div",17)(2,"mat-card-content",18),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"i",19),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.openDialogStageKanban(r))}),t.qZA(),t.TgZ(6,"i",20),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.delete(r.id))}),t.qZA()()(),t.YNc(7,T,20,8,"div",21),t.qZA()}if(2&a){const n=s.$implicit;t.xp6(3),t.Oqu(n.name),t.xp6(4),t.Q6J("ngForOf",n.events)}}const w=[{path:"",component:(()=>{class a{constructor(n,e,o,r,l,h){this.dialog=n,this.router=e,this.stageKanbanResource=o,this.eventResource=r,this._snackBar=l,this.dialogService=h,this.loading=!1,this.stageKanban=[],this.filteredStageEvents=[]}drop(n){n.previousContainer===n.container?(0,g.bA)(n.container.data,n.previousIndex,n.currentIndex):(0,g.EA)(n.previousContainer.data,n.container.data,n.previousIndex,n.currentIndex)}ngOnInit(){this.downloadStageKanban()}applyFilter(n){const e=n.target.value.trim().toLowerCase();this.filteredStageEvents=this.stageKanban.filter(o=>o.name.toLowerCase().includes(e))}viewEventsDetails(n){this.router.navigateByUrl("events/"+n)}downloadStageKanban(){this.loading=!0,this.stageKanbanResource.list().then(n=>{this.stageKanban=n,n.forEach(e=>{this.filteredStageEvents=e.events})}).catch(n=>{this.openSnackBar("Erro ao listar","Fechar","danger"),console.log(n)}).finally(()=>{this.loading=!1})}formatDate(n){let e=new Date(n),r=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][e.getMonth()];return`${e.getDate()} de ${r}, ${e.getFullYear()}`}formatHour(n){let e=n.split(":");return`${e[0]}:${e[1]}`}openDialogStageKanban(n){this.dialog.open(u,{width:"500px",maxHeight:"100vh",panelClass:"dialog",autoFocus:!1,data:{stageKanban:n}}).afterClosed().subscribe(o=>{o&&this.downloadStageKanban()})}openSnackBar(n,e,o){this._snackBar.open(n,e,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+o})}openNewEventDialog(n){this.dialog.open(K.A,{panelClass:"dialog",autoFocus:!1,width:"850px",height:"325px",data:{event:n}}).afterClosed().subscribe(o=>{o&&this.downloadEvents()})}downloadEvents(){this.loading=!0,this.eventResource.list().then(n=>{}).catch(n=>{this.openSnackBar("Erro ao listar","Fechar","danger")}).finally(()=>{this.loading=!1})}delete(n){this.dialogService.openConfirmDialog("Excluir","Tem certeza que deseja excluir?").afterClosed().subscribe(e=>{e&&(this.loading=!0,this.stageKanbanResource.delete(n).then(()=>{this.downloadStageKanban(),this.openSnackBar("Exclu\xeddo com sucesso!","Fechar","success")}).catch(o=>{this.openSnackBar("Erro ao excluir","Fechar","danger"),console.log(o)}).finally(()=>{this.loading=!1}))})}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(p.uw),t.Y36(m.F0),t.Y36(b.C),t.Y36(F.U),t.Y36(x.ux),t.Y36(Z.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-kanban-list"]],decls:19,vars:2,consts:[["id","main",1,"main"],[1,"d-flex","justify-content-between"],[1,"pagetitle"],[1,"search_input_group","w-25","mt-3",2,"height","40px"],[1,"mdi","mdi-magnify"],["matInput","","placeholder","Pesquisar",1,"search_input",3,"input"],["input",""],[1,"border-loading"],["style","height: 3px; border-radius: 50px","color","accent","mode","indeterminate",4,"ngIf"],[1,"mt-3","mb-3","mx-3"],["mat-stroked-button","",1,"d-flex","align-items-center",2,"color","#7048EF","height","30px",3,"click"],[1,"mdi","mdi-plus"],[1,"row","h-100","card-container"],[1,"d-flex"],["class","mat-card-custom card",4,"ngFor","ngForOf"],["color","accent","mode","indeterminate",2,"height","3px","border-radius","50px"],[1,"mat-card-custom","card"],[1,"d-flex","align-items-baseline","justify-content-between"],[1,"title-kanban"],[1,"mdi","mdi-pencil","icon-edit","mx-2",3,"click"],[1,"mdi","mdi-delete","icon-edit",3,"click"],[4,"ngFor","ngForOf"],[1,"kanban","p-3"],[1,"d-flex","align-items-center"],[1,"person-event"],[1,"mdi","mdi-square-edit-outline","mx-2","icon-edit",3,"click"],["mat-stroked-button","",1,"d-flex","align-items-center",2,"height","30px","margin-left","auto",3,"click"],[1,"local-event"],[1,"date-kanban-tasks"],[1,"d-flex","align-items-center","justify-content-center",2,"margin-left","10px"],[1,"users-kanban-tasks"],[1,"progress","mt-3","mb-2"],["role","progressbar",2,"font-size","14px","font-weight","bold",3,"ngClass"]],template:function(n,e){1&n&&(t.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"Kanban"),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"i",4),t._uU(7,"\xa0 "),t.TgZ(8,"input",5,6),t.NdJ("input",function(r){return e.applyFilter(r)}),t.qZA()()(),t.TgZ(10,"div",7),t.YNc(11,M,1,0,"mat-progress-bar",8),t.qZA(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return e.openDialogStageKanban()}),t._UZ(14,"i",11),t._uU(15," Adicionar "),t.qZA()(),t.TgZ(16,"div",12)(17,"div",13),t.YNc(18,O,8,2,"mat-card",14),t.qZA()()()),2&n&&(t.xp6(11),t.Q6J("ngIf",e.loading),t.xp6(7),t.Q6J("ngForOf",e.stageKanban))},dependencies:[d.mk,d.sg,d.O5,v.pW,C.lW,y.Nt,_.a8,_.dn],styles:["h1[_ngcontent-%COMP%]{margin-top:20px}.border-loading[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin-top:20px}.kanban[_ngcontent-%COMP%]{background:#FFFFFF;border:1px solid #E7E7E7;border-radius:15px;margin-bottom:10px;cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{background:#FFFFFF;border:1px solid #E7E7E7;border-radius:15px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.users-kanban-tasks[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;width:30px;height:29px;background:rgba(231,231,231,.5);border:1px solid rgba(127,127,127,.5);border-radius:30px;margin-top:15px;margin-right:5px}.date-kanban-tasks[_ngcontent-%COMP%]{height:30px;font-style:normal;font-weight:600;font-size:14px;line-height:22px;display:flex;align-items:center;color:#242424;margin-top:10px;background:rgba(244,243,243,.05);border:1px solid rgba(127,127,127,.5);border-radius:5px}.person-event[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;line-height:29px;color:#242424}.step-tasks[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:14px;line-height:22px;display:flex;align-items:center;color:#242424b3}.local-event[_ngcontent-%COMP%]{font-style:italic;font-weight:500;font-size:14px;line-height:22px;display:flex;align-items:center;color:#242424b3}.title-kanban[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:18px;line-height:29px;display:flex;align-items:center;color:#242424;margin-left:10px}.add-tasks-kanban[_ngcontent-%COMP%]{width:38px;height:37px;background:rgba(101,136,226,.15);border-radius:30px;margin-bottom:15px;margin-right:10px}.mat-card-custom[_ngcontent-%COMP%]{background-color:#f4f3f3;margin-left:13px;height:auto;overflow-y:scroll}  .progress{display:flex;height:1.2rem;overflow:hidden;font-size:13rem;background-color:#e9ecef;border-radius:.35rem}.card-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;width:100%;white-space:nowrap}.card[_ngcontent-%COMP%]{flex-shrink:0;width:30%}.border-loading[_ngcontent-%COMP%]{border-top:1px solid #e7e7e7;margin-top:1px;border-radius:50px}.icon-edit[_ngcontent-%COMP%]{color:#6e6e6e;cursor:pointer}.icon-edit[_ngcontent-%COMP%]:hover{color:#000}.not-progress-bar[_ngcontent-%COMP%]{font-weight:700;color:#242424;display:flex;justify-content:center;align-items:center}"]}),a})()},{path:"new",component:u},{path:":id/edit",component:u}];let A=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.Bz.forChild(w),m.Bz]}),a})();var E=i(1108);let P=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.ez,A,E.m,g._t]}),a})()}}]);