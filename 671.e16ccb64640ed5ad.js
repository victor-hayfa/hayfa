"use strict";(self.webpackChunkhayfa=self.webpackChunkhayfa||[]).push([[671],{9671:(W,u,i)=>{i.r(u),i.d(u,{LocalEventsModule:()=>$});var f=i(6895),d=i(1635),c=i(7155),g=i(8739),m=i(6308),p=i(220),h=i(9019),t=i(4650),v=i(2687),C=i(5412),L=i(7009),E=i(4868),x=i(6864),_=i(529),b=i(3162),T=i(4859),Z=i(4144),y=i(266);function w(n,o){1&n&&t._UZ(0,"mat-progress-bar",23)}function A(n,o){1&n&&(t.TgZ(0,"th",24),t._uU(1," Nome do Local "),t.qZA())}function N(n,o){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function U(n,o){1&n&&(t.TgZ(0,"th",24),t._uU(1," Descri\xe7\xe3o "),t.qZA())}function D(n,o){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function M(n,o){1&n&&(t.TgZ(0,"th",24),t._uU(1," Arquivo "),t.qZA())}function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27)(1,"i",28),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.downloadPDF())}),t.qZA()()}}function S(n,o){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.YNc(2,Y,2,0,"button",26),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.file," "),t.xp6(1),t.Q6J("ngIf",e.file)}}function P(n,o){1&n&&(t.TgZ(0,"th",24),t._uU(1," Status "),t.qZA())}function B(n,o){1&n&&(t.TgZ(0,"span",31),t._uU(1,"Ativo"),t.qZA())}function O(n,o){1&n&&(t.TgZ(0,"span",32),t._uU(1,"Inativo"),t.qZA())}function R(n,o){if(1&n&&(t.TgZ(0,"td",25),t.YNc(1,B,2,0,"span",29),t.YNc(2,O,2,0,"span",30),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.status),t.xp6(1),t.Q6J("ngIf",!e.status)}}function F(n,o){1&n&&t._UZ(0,"th",33)}function k(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",25)(1,"div",34)(2,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openLocalEventDialog(s))}),t._UZ(3,"i",36),t.qZA(),t.TgZ(4,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.delete(s.id))}),t._UZ(5,"i",38),t.qZA()()()}}function J(n,o){1&n&&t._UZ(0,"tr",39)}function Q(n,o){1&n&&t._UZ(0,"tr",40)}const z=function(){return[25,50,100]},I=[{path:"",component:(()=>{class n{constructor(e,a,l,s,r,q,K){this._liveAnnouncer=e,this.dialog=a,this._snackBar=l,this.router=s,this.dialogService=r,this.localEventResource=q,this.http=K,this.loading=!1,this.localEvents=[],this.displayedColumns=["name","description","file","status","options"],this.dataSource=new c.by}ngOnInit(){this.downloadLocalEvents()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}sortChange(e){this._liveAnnouncer.announce(e.direction?`Sorted ${e.direction}ending`:"Sorting cleared")}openLocalEventDialog(e){this.dialog.open(p.w,{width:"800px",maxHeight:"100vh",panelClass:"dialog",autoFocus:!1,data:{localEvent:e}}).afterClosed().subscribe(l=>{l&&this.downloadLocalEvents()})}downloadLocalEvents(){this.loading=!0,this.localEventResource.list().then(e=>{this.dataSource.data=e,this.localEvents=e,this.localEvents.forEach(a=>{this.filePDF=a.file}),this.status=e.status}).catch(e=>{this.openSnackBar("Erro ao listar","Fechar","danger"),console.log(e)}).finally(()=>{this.loading=!1})}delete(e){this.dialogService.openConfirmDialog("Excluir","Tem certeza que deseja excluir?").afterClosed().subscribe(a=>{a&&(this.loading=!0,this.localEventResource.delete(e).then(()=>{this.downloadLocalEvents(),this.openSnackBar("Exclu\xeddo com sucesso!","Fechar","success")}).catch(l=>{this.openSnackBar("Erro ao excluir","Fechar","danger"),console.log(l)}).finally(()=>{this.loading=!1}))})}downloadPDF(){const e=h.N.apiBaseUrl+this.filePDF;console.log("URL",e),this.http.get(e,{responseType:"blob"}).subscribe(a=>{const l=new Blob([a],{type:"application/pdf"}),s=window.URL.createObjectURL(l),r=document.createElement("a");r.href=s,r.download=this.filePDF,r.click(),window.URL.revokeObjectURL(s)})}openSnackBar(e,a,l){this._snackBar.open(e,a,{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:"snackBar-"+l})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.Kd),t.Y36(C.uw),t.Y36(L.ux),t.Y36(d.F0),t.Y36(E.x),t.Y36(x.P),t.Y36(_.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-local-events-list"]],viewQuery:function(e,a){if(1&e&&(t.Gf(g.NW,5),t.Gf(m.YE,5)),2&e){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first),t.iGM(l=t.CRH())&&(a.sort=l.first)}},decls:36,vars:6,consts:[["id","main",1,"main"],[1,"pagetitle"],[1,"border-loading"],["style","height: 3px; border-radius: 50px","color","accent","mode","indeterminate",4,"ngIf"],[1,"header-table"],[1,"d-flex","align-items-center","justify-content-between"],[1,"search_input_group","search-table","w-25","mt-4","mb-4"],[1,"mdi","mdi-magnify"],["matInput","","placeholder","Pesquisar",1,"search_input",3,"input"],["input",""],["mat-stroked-button","","type","button",1,"button-add",3,"click"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","file"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",3,"pageSizeOptions"],["color","accent","mode","indeterminate",2,"height","3px","border-radius","50px"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","button-download","mat-icon-button","","matTooltip","Clique para baixar",4,"ngIf"],["mat-icon-button","","matTooltip","Clique para baixar",1,"button-download"],[1,"mdi","mdi-download",3,"click"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],[1,"mat-icon-no-color"],["matTooltip","Editar",1,"icons-options",3,"click"],[1,"mdi","mdi-square-edit-outline"],["matTooltip","Excluir",1,"icons-options",3,"click"],[1,"mdi","mdi-trash-can-outline"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"main",0)(1,"div",1)(2,"h1"),t._uU(3,"Locais de Evento"),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,w,1,0,"mat-progress-bar",3),t.qZA(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"i",7),t._uU(10,"\xa0 "),t.TgZ(11,"input",8,9),t.NdJ("input",function(s){return a.applyFilter(s)}),t.qZA()(),t.TgZ(13,"div")(14,"button",10),t.NdJ("click",function(){return a.openLocalEventDialog()}),t._uU(15,"Adicionar"),t.qZA()()(),t.TgZ(16,"div")(17,"table",11),t.NdJ("matSortChange",function(s){return a.sortChange(s)}),t.ynx(18,12),t.YNc(19,A,2,0,"th",13),t.YNc(20,N,2,1,"td",14),t.BQk(),t.ynx(21,15),t.YNc(22,U,2,0,"th",13),t.YNc(23,D,2,1,"td",14),t.BQk(),t.ynx(24,16),t.YNc(25,M,2,0,"th",13),t.YNc(26,S,3,2,"td",14),t.BQk(),t.ynx(27,17),t.YNc(28,P,2,0,"th",13),t.YNc(29,R,3,2,"td",14),t.BQk(),t.ynx(30,18),t.YNc(31,F,1,0,"th",19),t.YNc(32,k,6,0,"td",14),t.BQk(),t.YNc(33,J,1,0,"tr",20),t.YNc(34,Q,1,0,"tr",21),t.qZA(),t._UZ(35,"mat-paginator",22),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",a.loading),t.xp6(12),t.Q6J("dataSource",a.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,z)))},dependencies:[f.O5,g.NW,b.pW,m.YE,m.nU,T.lW,Z.Nt,y.gM,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk],styles:['table[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{margin-top:20px}.button-add[_ngcontent-%COMP%]{border-radius:10px;margin-right:20px;font-size:16px;background-color:#7048ef;color:#fff;display:flex;align-items:center}.mat-header-cell[_ngcontent-%COMP%]{color:#484848;background-color:#f8f7f7;font-size:15px;font-family:TT Commons DemiBold,sans-serif}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0!important}.mdi-magnify[_ngcontent-%COMP%]:before{content:"\\f0349";font-size:smaller}.mdi-download[_ngcontent-%COMP%]:before{content:"\\f01da";color:#7048ef;font-size:17px}.button-download[_ngcontent-%COMP%]{height:30px;width:30px;margin-left:10px;display:inline-flex;align-items:center;justify-content:center}.button-download[_ngcontent-%COMP%]:hover{background-color:#e2e3e5;height:30px;width:30px}.mat-paginator[_ngcontent-%COMP%]{background-color:#f8f7f7;border-radius:10px}']}),n})()},{path:"new",component:p.w},{path:":id/edit",component:p.w}];let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(I),d.Bz]}),n})();var H=i(1108),G=i(1206);let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez,j,H.m,G._t]}),n})()}}]);